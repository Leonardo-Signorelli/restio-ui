import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{r as p}from"./iframe-IyVqLIBO.js";import{I as D}from"./input-BbMgsAlq.js";import{I as K}from"./icon-DIYehHzQ.js";function V({items:i,itemHeight:n,containerHeight:c,overscan:s=5}){const[h,q]=p.useState(0),r=p.useRef(null),v=i.length*n,d=Math.max(0,Math.floor(h/n)-s),g=Math.min(i.length-1,Math.floor((h+c)/n)+s),m=[];for(let l=d;l<=g;l++)m.push({item:i[l],index:l,offsetTop:l*n});const t=p.useCallback(l=>{const u=l.target.scrollTop;q(u)},[]),y=l=>{if(!r.current)return;const u=l*n,w=u+n,_=r.current,I=_.scrollTop,S=I+c;u<I?_.scrollTop=u:w>S&&(_.scrollTop=w-c)};return{virtualItems:m,containerProps:{ref:r,style:{maxHeight:`${c}px`,overflowY:"auto",position:"relative",willChange:"transform"},onScroll:t},innerProps:{style:{height:`${v}px`,position:"relative",width:"100%"}},scrollInfo:{scrollTop:h,viewportHeight:c,totalHeight:v,startIndex:d,endIndex:g},scrollToIndex:y}}try{V.displayName="useVirtualListScroll",V.__docgenInfo={description:"A custom hook to implement virtual scrolling for a list of items.",displayName:"useVirtualListScroll",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},itemHeight:{defaultValue:null,description:"",name:"itemHeight",required:!0,type:{name:"number"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!0,type:{name:"number"}},overscan:{defaultValue:{value:"5"},description:"",name:"overscan",required:!1,type:{name:"number"}}}}}catch{}const f={"rst-list":"_rst-list_193qn_1","rst-list-virtualScroll":"_rst-list-virtualScroll_193qn_19","rst-list-input":"_rst-list-input_193qn_23","rst-list-container":"_rst-list-container_193qn_28","rst-list-listItem":"_rst-list-listItem_193qn_33"},b=({id:i,options:n,ref:c,selectedIndex:s=null,activeIndex:h=[],width:q,onClick:r,onKeyDown:v})=>{var L;const[d,g]=p.useState(""),m=24,[t,y]=p.useState(s!==null?s:-1),l=d?n.filter(e=>e.value.toLowerCase().includes(d.toLowerCase())):n,u=e=>{g(e)},{virtualItems:w,containerProps:_,innerProps:I,scrollToIndex:S}=V({items:l,itemHeight:m,containerHeight:200,overscan:5});p.useEffect(()=>{s!==null&&s!==t&&y(s)},[s]),p.useEffect(()=>{t>=0&&t<l.length&&S(t)},[t,l]);const T=e=>{if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();let a=t;e.key==="ArrowDown"?a=t<l.length-1?t+1:0:e.key==="ArrowUp"&&(a=t>0?t-1:l.length-1),y(a)}else e.key==="Enter"?t>=0&&t<l.length&&(r==null||r(l[t])):e.key==="Escape"&&(e.preventDefault(),e.stopPropagation());v&&v(e)},N=e=>{T(e)},$=e=>{T(e)},x={wrapper:`${f["rst-list"]}`,input:`${f["rst-list-input"]}`,container:`${f["rst-list-container"]}`,virtualScroll:`${f["rst-list-virtualScroll"]}`,listItem:`${f["rst-list-listItem"]}`};return o.jsxs("div",{id:i,ref:c,className:x.wrapper,"data-component":"list",style:{width:q},children:[o.jsx("div",{className:x.input,children:o.jsx(D,{value:d,placeholder:"Search...",onChange:u,onKeyDown:N})}),o.jsx("div",{..._,className:x.container,tabIndex:0,role:"listbox","aria-label":"List",onKeyDown:$,"aria-activedescendant":t>=0&&t<l.length?(L=l[t])==null?void 0:L.value:void 0,children:o.jsx("div",{...I,className:x.virtualScroll,children:l.length<1?o.jsx("div",{className:f["rst-list-noElements"],children:"No elements"}):w.map(({item:e,index:a,offsetTop:j})=>{const E=h.includes(e.value);return o.jsxs("li",{role:"option",id:e.value,"aria-selected":t===a?"true":"false",tabIndex:-1,className:`${x.listItem} ${t===a?"selected-item":""}`,"aria-label":e.value,style:{height:`${m}px`,lineHeight:`calc(${m}px - 2*2px)`,transform:`translateY(${j}px)`},onClick:()=>{r==null||r(e),y(a)},children:[e.value,E&&o.jsx(K,{icon:"check"})]},a)})})})]})};try{b.displayName="List",b.__docgenInfo={description:"",displayName:"List",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"Option[]"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLElement | null>"}},showFilter:{defaultValue:null,description:"",name:"showFilter",required:!1,type:{name:"boolean"}},selectedIndex:{defaultValue:{value:"null"},description:"",name:"selectedIndex",required:!1,type:{name:"number"}},activeIndex:{defaultValue:{value:"[]"},description:"",name:"activeIndex",required:!1,type:{name:"string[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((option: Option) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((e: KeyboardEvent<Element>) => void)"}}}}}catch{}export{b as L};
