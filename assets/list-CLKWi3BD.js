import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as o}from"./iframe-djYvwYET.js";import{I as j}from"./input-BoeIaiL3.js";import{I as C}from"./icon-B4PiTpK4.js";function T({items:c,itemHeight:r,containerHeight:u,overscan:s=5}){const[f,S]=o.useState(0),p=o.useRef(null),h=c.length*r,v=Math.max(0,Math.floor(f/r)-s),d=Math.min(c.length-1,Math.floor((f+u)/r)+s),g=[];for(let n=v;n<=d;n++)g.push({item:c[n],index:n,offsetTop:n*r});const y=o.useCallback(n=>{const l=n.target.scrollTop;S(l)},[]),t=n=>{if(!p.current)return;const l=n*r,w=l+r,_=p.current,I=_.scrollTop,V=I+u;l<I?_.scrollTop=l:w>V&&(_.scrollTop=w-u)};return{virtualItems:g,containerProps:{ref:p,style:{maxHeight:`${u}px`,overflowY:"auto",position:"relative",willChange:"transform"},onScroll:y},innerProps:{style:{height:`${h}px`,position:"relative",width:"100%"}},scrollInfo:{scrollTop:f,viewportHeight:u,totalHeight:h,startIndex:v,endIndex:d},scrollToIndex:t}}try{T.displayName="useVirtualListScroll",T.__docgenInfo={description:"A custom hook to implement virtual scrolling for a list of items.",displayName:"useVirtualListScroll",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},itemHeight:{defaultValue:null,description:"",name:"itemHeight",required:!0,type:{name:"number"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!0,type:{name:"number"}},overscan:{defaultValue:{value:"5"},description:"",name:"overscan",required:!1,type:{name:"number"}}}}}catch{}const m={"rst-list":"_rst-list_1cpuo_1","rst-list-virtualScroll":"_rst-list-virtualScroll_1cpuo_16","rst-list-input":"_rst-list-input_1cpuo_20","rst-list-container":"_rst-list-container_1cpuo_25","rst-list-listItem":"_rst-list-listItem_1cpuo_30","rst-list-noElements":"_rst-list-noElements_1cpuo_59"},b=({id:c,options:r,ref:u,selectedIndex:s=null,activeIndex:f=[],width:S,onClick:p,onKeyDown:h})=>{const v=o.useRef(null),[d,g]=o.useState(""),y=24,[t,n]=o.useState(s!==null?s:-1);o.useEffect(()=>{v.current?.focus()},[]);const l=d?r.filter(e=>e.value.toLowerCase().includes(d.toLowerCase())):r,w=e=>{g(e)},{virtualItems:_,containerProps:I,innerProps:V,scrollToIndex:q}=T({items:l,itemHeight:y,containerHeight:200,overscan:5});o.useEffect(()=>{s!==null&&s!==t&&n(s)},[s]),o.useEffect(()=>{t>=0&&t<l.length&&q(t)},[t,l]);const L=e=>{if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();let i=t;e.key==="ArrowDown"?i=t<l.length-1?t+1:0:e.key==="ArrowUp"&&(i=t>0?t-1:l.length-1),n(i)}else e.key==="Enter"?t>=0&&t<l.length&&p?.(l[t]):e.key==="Escape"&&(e.preventDefault(),e.stopPropagation());h&&h(e)},E=e=>{L(e)},N=e=>{L(e)},x={wrapper:`${m["rst-list"]}`,input:`${m["rst-list-input"]}`,container:`${m["rst-list-container"]}`,virtualScroll:`${m["rst-list-virtualScroll"]}`,listItem:`${m["rst-list-listItem"]}`};return a.jsxs("div",{id:c,ref:u,className:x.wrapper,"data-component":"list",style:{width:S},children:[a.jsx("div",{className:x.input,children:a.jsx(j,{value:d,placeholder:"Search...",onChange:w,onKeyDown:E,ref:v})}),a.jsx("div",{...I,className:x.container,tabIndex:0,role:"listbox","aria-label":"List",onKeyDown:N,"aria-activedescendant":t>=0&&t<l.length?l[t]?.value:void 0,children:a.jsx("div",{...V,className:x.virtualScroll,children:l.length<1?a.jsx("div",{className:m["rst-list-noElements"],children:"No elements"}):_.map(({item:e,index:i,offsetTop:$})=>{const k=f.includes(e.value);return a.jsxs("li",{role:"option",id:e.value,"aria-selected":t===i?"true":"false",tabIndex:-1,className:`${x.listItem} ${t===i?"selected-item":""}`,"aria-label":e.value,style:{height:`${y}px`,lineHeight:`calc(${y}px - 2*2px)`,transform:`translateY(${$}px)`},onClick:()=>{p?.(e),n(i)},children:[e.value,k&&a.jsx(C,{icon:"check"})]},i)})})})]})};try{b.displayName="List",b.__docgenInfo={description:"",displayName:"List",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"Option[]"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLElement | null>"}},showFilter:{defaultValue:null,description:"",name:"showFilter",required:!1,type:{name:"boolean"}},selectedIndex:{defaultValue:{value:"null"},description:"",name:"selectedIndex",required:!1,type:{name:"number"}},activeIndex:{defaultValue:{value:"[]"},description:"",name:"activeIndex",required:!1,type:{name:"string[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((option: Option) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((e: KeyboardEvent<Element>) => void)"}}}}}catch{}export{b as L};
