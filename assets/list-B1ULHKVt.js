import{j as c}from"./jsx-runtime-D_zvdyIk.js";import{r as o}from"./iframe-BIhWZDqy.js";import{I as D}from"./input-D04FMkL5.js";import{I as K}from"./icon-j2u9j-Zf.js";function V({items:u,itemHeight:n,containerHeight:p,overscan:a=5}){const[f,q]=o.useState(0),s=o.useRef(null),h=u.length*n,v=Math.max(0,Math.floor(f/n)-a),d=Math.min(u.length-1,Math.floor((f+p)/n)+a),g=[];for(let r=v;r<=d;r++)g.push({item:u[r],index:r,offsetTop:r*n});const y=o.useCallback(r=>{const l=r.target.scrollTop;q(l)},[]),t=r=>{if(!s.current)return;const l=r*n,w=l+n,x=s.current,I=x.scrollTop,S=I+p;l<I?x.scrollTop=l:w>S&&(x.scrollTop=w-p)};return{virtualItems:g,containerProps:{ref:s,style:{maxHeight:`${p}px`,overflowY:"auto",position:"relative",willChange:"transform"},onScroll:y},innerProps:{style:{height:`${h}px`,position:"relative",width:"100%"}},scrollInfo:{scrollTop:f,viewportHeight:p,totalHeight:h,startIndex:v,endIndex:d},scrollToIndex:t}}try{V.displayName="useVirtualListScroll",V.__docgenInfo={description:"A custom hook to implement virtual scrolling for a list of items.",displayName:"useVirtualListScroll",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},itemHeight:{defaultValue:null,description:"",name:"itemHeight",required:!0,type:{name:"number"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!0,type:{name:"number"}},overscan:{defaultValue:{value:"5"},description:"",name:"overscan",required:!1,type:{name:"number"}}}}}catch{}const m={"rst-list":"_rst-list_qx83k_1","rst-list-virtualScroll":"_rst-list-virtualScroll_qx83k_19","rst-list-input":"_rst-list-input_qx83k_23","rst-list-container":"_rst-list-container_qx83k_28","rst-list-listItem":"_rst-list-listItem_qx83k_33","rst-list-noElements":"_rst-list-noElements_qx83k_62"},b=({id:u,options:n,ref:p,selectedIndex:a=null,activeIndex:f=[],width:q,onClick:s,onKeyDown:h})=>{var L;const v=o.useRef(null),[d,g]=o.useState(""),y=24,[t,r]=o.useState(a!==null?a:-1);o.useEffect(()=>{var e;(e=v.current)==null||e.focus()},[]);const l=d?n.filter(e=>e.value.toLowerCase().includes(d.toLowerCase())):n,w=e=>{g(e)},{virtualItems:x,containerProps:I,innerProps:S,scrollToIndex:E}=V({items:l,itemHeight:y,containerHeight:200,overscan:5});o.useEffect(()=>{a!==null&&a!==t&&r(a)},[a]),o.useEffect(()=>{t>=0&&t<l.length&&E(t)},[t,l]);const T=e=>{if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();let i=t;e.key==="ArrowDown"?i=t<l.length-1?t+1:0:e.key==="ArrowUp"&&(i=t>0?t-1:l.length-1),r(i)}else e.key==="Enter"?t>=0&&t<l.length&&(s==null||s(l[t])):e.key==="Escape"&&(e.preventDefault(),e.stopPropagation());h&&h(e)},N=e=>{T(e)},$=e=>{T(e)},_={wrapper:`${m["rst-list"]}`,input:`${m["rst-list-input"]}`,container:`${m["rst-list-container"]}`,virtualScroll:`${m["rst-list-virtualScroll"]}`,listItem:`${m["rst-list-listItem"]}`};return c.jsxs("div",{id:u,ref:p,className:_.wrapper,"data-component":"list",style:{width:q},children:[c.jsx("div",{className:_.input,children:c.jsx(D,{value:d,placeholder:"Search...",onChange:w,onKeyDown:N,ref:v})}),c.jsx("div",{...I,className:_.container,tabIndex:0,role:"listbox","aria-label":"List",onKeyDown:$,"aria-activedescendant":t>=0&&t<l.length?(L=l[t])==null?void 0:L.value:void 0,children:c.jsx("div",{...S,className:_.virtualScroll,children:l.length<1?c.jsx("div",{className:m["rst-list-noElements"],children:"No elements"}):x.map(({item:e,index:i,offsetTop:j})=>{const k=f.includes(e.value);return c.jsxs("li",{role:"option",id:e.value,"aria-selected":t===i?"true":"false",tabIndex:-1,className:`${_.listItem} ${t===i?"selected-item":""}`,"aria-label":e.value,style:{height:`${y}px`,lineHeight:`calc(${y}px - 2*2px)`,transform:`translateY(${j}px)`},onClick:()=>{s==null||s(e),r(i)},children:[e.value,k&&c.jsx(K,{icon:"check"})]},i)})})})]})};try{b.displayName="List",b.__docgenInfo={description:"",displayName:"List",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"Option[]"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLElement | null>"}},showFilter:{defaultValue:null,description:"",name:"showFilter",required:!1,type:{name:"boolean"}},selectedIndex:{defaultValue:{value:"null"},description:"",name:"selectedIndex",required:!1,type:{name:"number"}},activeIndex:{defaultValue:{value:"[]"},description:"",name:"activeIndex",required:!1,type:{name:"string[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((option: Option) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((e: KeyboardEvent<Element>) => void)"}}}}}catch{}export{b as L};
