import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as o}from"./iframe-BSBCLB1l.js";import{I as j}from"./input-RCmTqK5b.js";import{I as C}from"./icon-IrSBRdLy.js";function V({items:c,itemHeight:r,containerHeight:u,overscan:s=5}){const[f,q]=o.useState(0),p=o.useRef(null),h=c.length*r,v=Math.max(0,Math.floor(f/r)-s),d=Math.min(c.length-1,Math.floor((f+u)/r)+s),g=[];for(let n=v;n<=d;n++)g.push({item:c[n],index:n,offsetTop:n*r});const y=o.useCallback(n=>{const l=n.target.scrollTop;q(l)},[]),t=n=>{if(!p.current)return;const l=n*r,w=l+r,x=p.current,I=x.scrollTop,S=I+u;l<I?x.scrollTop=l:w>S&&(x.scrollTop=w-u)};return{virtualItems:g,containerProps:{ref:p,style:{maxHeight:`${u}px`,overflowY:"auto",position:"relative",willChange:"transform"},onScroll:y},innerProps:{style:{height:`${h}px`,position:"relative",width:"100%"}},scrollInfo:{scrollTop:f,viewportHeight:u,totalHeight:h,startIndex:v,endIndex:d},scrollToIndex:t}}try{V.displayName="useVirtualListScroll",V.__docgenInfo={description:"A custom hook to implement virtual scrolling for a list of items.",displayName:"useVirtualListScroll",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},itemHeight:{defaultValue:null,description:"",name:"itemHeight",required:!0,type:{name:"number"}},containerHeight:{defaultValue:null,description:"",name:"containerHeight",required:!0,type:{name:"number"}},overscan:{defaultValue:{value:"5"},description:"",name:"overscan",required:!1,type:{name:"number"}}}}}catch{}const m={"rst-list":"_rst-list_qx83k_1","rst-list-virtualScroll":"_rst-list-virtualScroll_qx83k_19","rst-list-input":"_rst-list-input_qx83k_23","rst-list-container":"_rst-list-container_qx83k_28","rst-list-listItem":"_rst-list-listItem_qx83k_33","rst-list-noElements":"_rst-list-noElements_qx83k_62"},T=({id:c,options:r,ref:u,selectedIndex:s=null,activeIndex:f=[],width:q,onClick:p,onKeyDown:h})=>{const v=o.useRef(null),[d,g]=o.useState(""),y=24,[t,n]=o.useState(s!==null?s:-1);o.useEffect(()=>{v.current?.focus()},[]);const l=d?r.filter(e=>e.value.toLowerCase().includes(d.toLowerCase())):r,w=e=>{g(e)},{virtualItems:x,containerProps:I,innerProps:S,scrollToIndex:L}=V({items:l,itemHeight:y,containerHeight:200,overscan:5});o.useEffect(()=>{s!==null&&s!==t&&n(s)},[s]),o.useEffect(()=>{t>=0&&t<l.length&&L(t)},[t,l]);const k=e=>{if(e.key==="ArrowDown"||e.key==="ArrowUp"){e.preventDefault();let i=t;e.key==="ArrowDown"?i=t<l.length-1?t+1:0:e.key==="ArrowUp"&&(i=t>0?t-1:l.length-1),n(i)}else e.key==="Enter"?t>=0&&t<l.length&&p?.(l[t]):e.key==="Escape"&&(e.preventDefault(),e.stopPropagation());h&&h(e)},b=e=>{k(e)},E=e=>{k(e)},_={wrapper:`${m["rst-list"]}`,input:`${m["rst-list-input"]}`,container:`${m["rst-list-container"]}`,virtualScroll:`${m["rst-list-virtualScroll"]}`,listItem:`${m["rst-list-listItem"]}`};return a.jsxs("div",{id:c,ref:u,className:_.wrapper,"data-component":"list",style:{width:q},children:[a.jsx("div",{className:_.input,children:a.jsx(j,{value:d,placeholder:"Search...",onChange:w,onKeyDown:b,ref:v})}),a.jsx("div",{...I,className:_.container,tabIndex:0,role:"listbox","aria-label":"List",onKeyDown:E,"aria-activedescendant":t>=0&&t<l.length?l[t]?.value:void 0,children:a.jsx("div",{...S,className:_.virtualScroll,children:l.length<1?a.jsx("div",{className:m["rst-list-noElements"],children:"No elements"}):x.map(({item:e,index:i,offsetTop:N})=>{const $=f.includes(e.value);return a.jsxs("li",{role:"option",id:e.value,"aria-selected":t===i?"true":"false",tabIndex:-1,className:`${_.listItem} ${t===i?"selected-item":""}`,"aria-label":e.value,style:{height:`${y}px`,lineHeight:`calc(${y}px - 2*2px)`,transform:`translateY(${N}px)`},onClick:()=>{p?.(e),n(i)},children:[e.value,$&&a.jsx(C,{icon:"check"})]},i)})})})]})};try{T.displayName="List",T.__docgenInfo={description:"",displayName:"List",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"Option[]"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLElement | null>"}},showFilter:{defaultValue:null,description:"",name:"showFilter",required:!1,type:{name:"boolean"}},selectedIndex:{defaultValue:{value:"null"},description:"",name:"selectedIndex",required:!1,type:{name:"number"}},activeIndex:{defaultValue:{value:"[]"},description:"",name:"activeIndex",required:!1,type:{name:"string[]"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((option: Option) => void)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((e: KeyboardEvent<Element>) => void)"}}}}}catch{}export{T as L};
